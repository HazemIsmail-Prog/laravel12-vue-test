import{b as N,a as y,g as T,c as B}from"./VisuallyHidden-CUMuN7QL.js";import{q as m,z as E,X as D,Z as U,d as F,W as G,a9 as L,_ as R,j as $,s as j,o as V,g as z,w as _,e as K,f as h,r as Y}from"./app-wShsZ3fb.js";import{S as M,P as H}from"./index-B5f_MCT_.js";import{u as W}from"./useForwardExpose-DwumjNk7.js";import{c as X}from"./createLucideIcon-DKFhqadI.js";function Z(e){const o=N({dir:m("ltr")});return E(()=>e?.value||o.dir?.value||"ltr")}const x="data-reka-collection-item";function J(e={}){const{key:o="",isProvider:u=!1}=e,t=`${o}CollectionProvider`;let r;if(u){const a=m(new Map);r={collectionRef:m(),itemMap:a},D(t,r)}else r=U(t);const w=(a=!1)=>{const n=r.collectionRef.value;if(!n)return[];const i=Array.from(n.querySelectorAll(`[${x}]`)),s=Array.from(r.itemMap.value.values()).sort((f,p)=>i.indexOf(f.ref)-i.indexOf(p.ref));return a?s:s.filter(f=>f.ref.dataset.disabled!=="")},A=F({name:"CollectionSlot",inheritAttrs:!1,setup(a,{slots:n,attrs:i}){const{primitiveElement:d,currentElement:s}=y();return $(s,()=>{r.collectionRef.value=s.value}),()=>R(M,{ref:d,...i},n)}}),b=F({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(a,{slots:n,attrs:i}){const{primitiveElement:d,currentElement:s}=y();return G(f=>{if(s.value){const p=L(s.value);r.itemMap.value.set(p,{ref:s.value,value:a.value}),f(()=>r.itemMap.value.delete(p))}}),()=>R(M,{...i,[x]:"",ref:d},n)}}),C=E(()=>Array.from(r.itemMap.value.values())),g=E(()=>r.itemMap.value.size);return{getItems:w,reactiveItems:C,itemMapSize:g,CollectionSlot:A,CollectionItem:b}}const Q="rovingFocusGroup.onEntryFocus",ee={bubbles:!1,cancelable:!0},te={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oe(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function de(e,o,u){const t=oe(e.key,u);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(t))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(t)))return te[t]}function re(e,o=!1){const u=T();for(const t of e)if(t===u||(t.focus({preventScroll:o}),T()!==u))return}function fe(e,o){return e.map((u,t)=>e[(o+t)%e.length])}const[pe,ne]=B("RovingFocusGroup");var ae=F({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:o,emit:u}){const t=e,r=u,{loop:w,orientation:A,dir:b}=j(t),C=Z(b),g=W(t,"currentTabStopId",r,{defaultValue:t.defaultCurrentTabStopId,passive:t.currentTabStopId===void 0}),a=m(!1),n=m(!1),i=m(0),{getItems:d,CollectionSlot:s}=J({isProvider:!0});function f(l){const v=!n.value;if(l.currentTarget&&l.target===l.currentTarget&&v&&!a.value){const I=new CustomEvent(Q,ee);if(l.currentTarget.dispatchEvent(I),r("entryFocus",I),!I.defaultPrevented){const S=d().map(c=>c.ref).filter(c=>c.dataset.disabled!==""),P=S.find(c=>c.getAttribute("data-active")===""),O=S.find(c=>c.getAttribute("data-highlighted")===""),k=S.find(c=>c.id===g.value),q=[P,O,k,...S].filter(Boolean);re(q,t.preventScrollOnEntryFocus)}}n.value=!1}function p(){setTimeout(()=>{n.value=!1},1)}return o({getItems:d}),ne({loop:w,dir:C,orientation:A,currentTabStopId:g,onItemFocus:l=>{g.value=l},onItemShiftTab:()=>{a.value=!0},onFocusableItemAdd:()=>{i.value++},onFocusableItemRemove:()=>{i.value--}}),(l,v)=>(V(),z(h(s),null,{default:_(()=>[K(h(H),{tabindex:a.value||i.value===0?-1:0,"data-orientation":h(A),as:l.as,"as-child":l.asChild,dir:h(C),style:{outline:"none"},onMousedown:v[0]||(v[0]=I=>n.value=!0),onMouseup:p,onFocus:f,onBlur:v[1]||(v[1]=I=>a.value=!1)},{default:_(()=>[Y(l.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),ve=ae;const me=X("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);export{me as C,ve as R,Z as a,re as f,de as g,pe as i,J as u,fe as w};
