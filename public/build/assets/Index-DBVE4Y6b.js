import{c as $,a as P,_ as I}from"./index-D4HVJ3kC.js";import{d as g,c as v,n as k,f as t,r as x,o as f,g as U,i as h,j as G,a as E,p as H,b as L,k as O,l as J,e as a,h as K,w as l,m,t as p,F as R,q as Q,s as W}from"./app-BugyfZo9.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-CkgNr6AQ.js";import{u as Y}from"./index-ByzHz6WH.js";import{_ as q}from"./Spinner.vue_vue_type_script_setup_true_lang-D3GEvhBZ.js";import{_ as Z}from"./AppLayout.vue_vue_type_script_setup_true_lang-C84HnEvS.js";import{_ as tt}from"./index-CrhYbn-l.js";import{_ as et}from"./Form.vue_vue_type_script_setup_true_lang-ClJywt39.js";import{c as at}from"./createLucideIcon-DKOAw4Wb.js";import"./VisuallyHidden-DfTYNH2j.js";import"./useForwardExpose-DK47mm8_.js";import"./useForwardPropsEmits-KEL8IpjZ.js";import"./check-yWxCgblA.js";import"./SheetTitle.vue_vue_type_script_setup_true_lang-Sig3w83X.js";import"./index-BDqSilVs.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-T55MMJX8.js";import"./InputError.vue_vue_type_script_setup_true_lang-Dwdkh9P8.js";import"./VisuallyHiddenInput-B9R_HUiK.js";import"./Label.vue_vue_type_script_setup_true_lang-CGxilFV8.js";const st=at("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),lt=g({__name:"InputGroup",props:{class:{}},setup(s){const e=s;return(r,o)=>(f(),v("div",{"data-slot":"input-group",role:"group",class:k(t($)("group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none","h-9 min-w-0 has-[>textarea]:h-auto","has-[>[data-align=inline-start]]:[&>input]:pl-2","has-[>[data-align=inline-end]]:[&>input]:pr-2","has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3","has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3","has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]","has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40",e.class))},[x(r.$slots,"default")],2))}}),rt=["data-align"],F=g({__name:"InputGroupAddon",props:{align:{default:"inline-start"},class:{}},setup(s){const e=s;function r(o){const b=o.currentTarget,y=o.target;y&&y.closest("button")||b&&b?.parentElement&&b.parentElement?.querySelector("input")?.focus()}return(o,b)=>(f(),v("div",{role:"group","data-slot":"input-group-addon","data-align":e.align,class:k(t($)(t(ot)({align:e.align}),e.class)),onClick:r},[x(o.$slots,"default")],10,rt))}}),nt=g({__name:"InputGroupInput",props:{class:{}},setup(s){const e=s;return(r,o)=>(f(),U(t(X),{"data-slot":"input-group-control",class:k(t($)("flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent",e.class))},null,8,["class"]))}}),ot=P("text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none [&>svg:not([class*='size-'])]:size-4 [&>kbd]:rounded-[calc(var(--radius)-5px)] group-data-[disabled=true]/input-group:opacity-50",{variants:{align:{"inline-start":"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]","inline-end":"order-last pr-3 has-[>button]:mr-[-0.45rem] has-[>kbd]:mr-[-0.35rem]","block-start":"order-first w-full justify-start px-3 pt-3 [.border-b]:pb-3 group-has-[>input]/input-group:pt-2.5","block-end":"order-last w-full justify-start px-3 pb-3 [.border-t]:pt-3 group-has-[>input]/input-group:pb-2.5"}},defaultVariants:{align:"inline-start"}}),it=["data-orientation"],ut=g({__name:"ButtonGroup",props:{class:{},orientation:{}},setup(s){const e=s;return(r,o)=>(f(),v("div",{role:"group","data-slot":"button-group","data-orientation":e.orientation,class:k(t($)(t(dt)({orientation:e.orientation}),e.class))},[x(r.$slots,"default")],10,it))}}),dt=P("flex w-fit items-stretch [&>*]:focus-visible:z-10 [&>*]:focus-visible:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md has-[>[data-slot=button-group]]:gap-2",{variants:{orientation:{horizontal:"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none",vertical:"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none"}},defaultVariants:{orientation:"horizontal"}});function ct(){const s=h([]),e=h(0),r=h(!1),o=h(null),b=h(1),y=h(!1),_=h(null),z=h(!1),w=h({}),A=(i,n={})=>{r.value=!0,G.get(i,{params:n}).then(c=>{s.value=c.data.data,e.value=c.data.total,o.value=c.data.next_page_url,b.value=c.data.current_page}).catch(c=>{throw c}).finally(()=>{r.value=!1})},B=(i={})=>{o.value&&G.get(o.value,i).then(n=>{const c=n.data.data.filter(S=>!s.value.some(C=>C.id===S.id));s.value.push(...c),o.value=n.data.next_page_url})},T=i=>{w.value={},_.value=i,y.value=!0},d=()=>{w.value={},_.value=null,y.value=!1};return{fetch:A,loadMore:B,submit:(i,n)=>{const c=_.value?"put":"post",S=_.value?`${i}/${_.value.id}`:i;z.value=!0,G[c](S,n).then(C=>{_.value?s.value=s.value.map(N=>N.id===_.value.id?C.data:N):(s.value.unshift(C.data),e.value+=1),d()}).catch(C=>{w.value=C.response.data.errors}).finally(()=>{z.value=!1})},destroy:async(i,n)=>{confirm("Are you sure you want to delete this item?")&&G.delete(`${i}/${n}`).then(c=>(s.value=s.value.filter(S=>S.id!==n),e.value-=1,c.data)).catch(c=>{throw c})},openSheet:T,closeSheet:d,data:s,total:e,isFetching:r,nextPageUrl:o,currentPage:b,formSheetIsOpen:y,isSubmitting:z,errors:w,selectedRecord:_}}const pt={"data-slot":"table-container",class:"relative w-full overflow-auto"},ft=g({__name:"Table",props:{class:{}},setup(s){const e=s;return(r,o)=>(f(),v("div",pt,[E("table",{"data-slot":"table",class:k(t($)("w-full caption-bottom text-sm",e.class))},[x(r.$slots,"default")],2)]))}}),mt=g({__name:"TableBody",props:{class:{}},setup(s){const e=s;return(r,o)=>(f(),v("tbody",{"data-slot":"table-body",class:k(t($)("[&_tr:last-child]:border-0",e.class))},[x(r.$slots,"default")],2))}}),V=g({__name:"TableCell",props:{class:{}},setup(s){const e=s;return(r,o)=>(f(),v("td",{"data-slot":"table-cell",class:k(t($)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e.class))},[x(r.$slots,"default")],2))}}),D=g({__name:"TableRow",props:{class:{}},setup(s){const e=s;return(r,o)=>(f(),v("tr",{"data-slot":"table-row",class:k(t($)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e.class))},[x(r.$slots,"default")],2))}}),j=g({__name:"TableHead",props:{class:{}},setup(s){const e=s;return(r,o)=>(f(),v("th",{"data-slot":"table-head",class:k(t($)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e.class))},[x(r.$slots,"default")],2))}}),vt=g({__name:"TableHeader",props:{class:{}},setup(s){const e=s;return(r,o)=>(f(),v("thead",{"data-slot":"table-header",class:k(t($)("[&_tr]:border-b",e.class))},[x(r.$slots,"default")],2))}}),_t={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},ht={class:"flex flex-col flex-col-reverse md:flex-row justify-end gap-2 items-start md:items-center"},gt={key:1,class:"flex justify-center items-center h-full"},Nt=g({__name:"Index",setup(s){const e=ct(),{fetch:r,loadMore:o,data:b,total:y,isFetching:_,nextPageUrl:z,destroy:w,openSheet:A}=e;H("sharedCrud",e);const{t:B}=L(),T=h(null),d=h({search:"",is_active:"all"}),M=[{title:B("Users"),href:"/users"}];return O(()=>{Y(T,([{isIntersecting:u}])=>{u&&o(d.value)}),r("/users",d.value)}),J(d,()=>r("/users",d.value),{deep:!0}),(u,i)=>(f(),v(R,null,[a(t(K),{title:u.$t("Users")},null,8,["title"]),a(et),a(Z,{breadcrumbs:M},{default:l(()=>[E("div",_t,[E("div",ht,[a(t(lt),null,{default:l(()=>[a(t(nt),{type:"search",placeholder:u.$t("Search..."),modelValue:d.value.search,"onUpdate:modelValue":i[0]||(i[0]=n=>d.value.search=n),"default-value":d.value.search},null,8,["placeholder","modelValue","default-value"]),a(t(F),null,{default:l(()=>[a(t(st))]),_:1}),a(t(F),{align:"inline-end"},{default:l(()=>[m(p(t(y))+" "+p(u.$t("results")),1)]),_:1})]),_:1}),a(t(ut),null,{default:l(()=>[a(t(I),{onClick:i[1]||(i[1]=n=>d.value.is_active="all"),variant:d.value.is_active==="all"?"default":"secondary",size:"sm"},{default:l(()=>[m(p(u.$t("All")),1)]),_:1},8,["variant"]),a(t(I),{onClick:i[2]||(i[2]=n=>d.value.is_active="active"),variant:d.value.is_active==="active"?"default":"secondary",size:"sm"},{default:l(()=>[m(p(u.$t("Active")),1)]),_:1},8,["variant"]),a(t(I),{onClick:i[3]||(i[3]=n=>d.value.is_active="inactive"),variant:d.value.is_active==="inactive"?"default":"secondary",size:"sm"},{default:l(()=>[m(p(u.$t("Inactive")),1)]),_:1},8,["variant"])]),_:1}),a(t(I),{class:"self-end md:self-center",variant:"default",size:"sm",onClick:i[4]||(i[4]=n=>t(A)(null))},{default:l(()=>[m(p(u.$t("Add User")),1)]),_:1})]),t(b).length>0&&!t(_)?(f(),U(t(ft),{key:0},{default:l(()=>[a(t(vt),null,{default:l(()=>[a(t(D),null,{default:l(()=>[a(t(j),null,{default:l(()=>[m(p(u.$t("ID")),1)]),_:1}),a(t(j),null,{default:l(()=>[m(p(u.$t("Name")),1)]),_:1}),a(t(j),null,{default:l(()=>[m(p(u.$t("Email")),1)]),_:1}),a(t(j),null,{default:l(()=>[m(p(u.$t("Is Active")),1)]),_:1}),a(t(j))]),_:1})]),_:1}),a(t(mt),null,{default:l(()=>[(f(!0),v(R,null,Q(t(b),n=>(f(),U(t(D),{key:n.id},{default:l(()=>[a(t(V),null,{default:l(()=>[m(p(n.id),1)]),_:2},1024),a(t(V),{class:"font-semibold"},{default:l(()=>[m(p(n.name),1)]),_:2},1024),a(t(V),{class:"text-left"},{default:l(()=>[m(p(n.email),1)]),_:2},1024),a(t(V),null,{default:l(()=>[a(t(tt),{variant:n.is_active?"secondary":"destructive"},{default:l(()=>[m(p(n.is_active?u.$t("Active"):u.$t("Inactive")),1)]),_:2},1032,["variant"])]),_:2},1024),a(t(V),{class:"flex gap-2 justify-end"},{default:l(()=>[a(t(I),{variant:"outline",size:"sm",onClick:c=>t(A)(n)},{default:l(()=>[m(p(u.$t("Edit")),1)]),_:1},8,["onClick"]),a(t(I),{variant:"destructive",size:"sm",onClick:c=>t(w)("/users",n.id)},{default:l(()=>[m(p(u.$t("Delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(f(),v("div",gt,[a(t(q),{class:"size-10"})])),t(z)&&!t(_)?(f(),v("div",{key:2,class:"flex justify-center items-center",ref_key:"loadMoreRef",ref:T},[a(t(q),{class:"size-10"})],512)):W("",!0)])]),_:1})],64))}});export{Nt as default};
