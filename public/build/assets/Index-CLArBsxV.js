import{c as h,a as M,_ as x}from"./index-B5f_MCT_.js";import{d as _,c as v,n as g,f as t,r as b,o as c,g as T,a as j,b as P,i as O,j as G,k as V,e as a,h as J,w as s,l as p,t as d,F as B,m as K,p as Q,q as $}from"./app-wShsZ3fb.js";import{_ as W}from"./Input.vue_vue_type_script_setup_true_lang-G6hB-_Cq.js";import{u as X}from"./index-gkJMhtZ0.js";import{_ as E}from"./Spinner.vue_vue_type_script_setup_true_lang-s5VG2duW.js";import{_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-oa8G2Pm-.js";import{_ as Z}from"./index-D_kZPVKg.js";import{_ as tt}from"./Form.vue_vue_type_script_setup_true_lang-6QoIVpr2.js";import{c as et}from"./createLucideIcon-DKFhqadI.js";import"./VisuallyHidden-CUMuN7QL.js";import"./useForwardExpose-DwumjNk7.js";import"./useForwardPropsEmits-De2gnoms.js";import"./check-rN5UkBPg.js";import"./SheetTitle.vue_vue_type_script_setup_true_lang-Bu4B5yjy.js";import"./index-BDqSilVs.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BVcifDT6.js";import"./InputError.vue_vue_type_script_setup_true_lang-BfdGHmMf.js";import"./VisuallyHiddenInput-fKSidZlM.js";import"./Label.vue_vue_type_script_setup_true_lang-BXoIZy-v.js";const at=et("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),st=_({__name:"InputGroup",props:{class:{}},setup(n){const l=n;return(o,u)=>(c(),v("div",{"data-slot":"input-group",role:"group",class:g(t(h)("group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none","h-9 min-w-0 has-[>textarea]:h-auto","has-[>[data-align=inline-start]]:[&>input]:pl-2","has-[>[data-align=inline-end]]:[&>input]:pr-2","has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3","has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3","has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]","has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40",l.class))},[b(o.$slots,"default")],2))}}),lt=["data-align"],N=_({__name:"InputGroupAddon",props:{align:{default:"inline-start"},class:{}},setup(n){const l=n;function o(u){const f=u.currentTarget,k=u.target;k&&k.closest("button")||f&&f?.parentElement&&f.parentElement?.querySelector("input")?.focus()}return(u,f)=>(c(),v("div",{role:"group","data-slot":"input-group-addon","data-align":l.align,class:g(t(h)(t(nt)({align:l.align}),l.class)),onClick:o},[b(u.$slots,"default")],10,lt))}}),rt=_({__name:"InputGroupInput",props:{class:{}},setup(n){const l=n;return(o,u)=>(c(),T(t(W),{"data-slot":"input-group-control",class:g(t(h)("flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent",l.class))},null,8,["class"]))}}),nt=M("text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none [&>svg:not([class*='size-'])]:size-4 [&>kbd]:rounded-[calc(var(--radius)-5px)] group-data-[disabled=true]/input-group:opacity-50",{variants:{align:{"inline-start":"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]","inline-end":"order-last pr-3 has-[>button]:mr-[-0.45rem] has-[>kbd]:mr-[-0.35rem]","block-start":"order-first w-full justify-start px-3 pt-3 [.border-b]:pb-3 group-has-[>input]/input-group:pt-2.5","block-end":"order-last w-full justify-start px-3 pb-3 [.border-t]:pt-3 group-has-[>input]/input-group:pb-2.5"}},defaultVariants:{align:"inline-start"}}),ot=["data-orientation"],it=_({__name:"ButtonGroup",props:{class:{},orientation:{}},setup(n){const l=n;return(o,u)=>(c(),v("div",{role:"group","data-slot":"button-group","data-orientation":l.orientation,class:g(t(h)(t(ut)({orientation:l.orientation}),l.class))},[b(o.$slots,"default")],10,ot))}}),ut=M("flex w-fit items-stretch [&>*]:focus-visible:z-10 [&>*]:focus-visible:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md has-[>[data-slot=button-group]]:gap-2",{variants:{orientation:{horizontal:"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none",vertical:"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none"}},defaultVariants:{orientation:"horizontal"}}),dt={"data-slot":"table-container",class:"relative w-full overflow-auto"},ct=_({__name:"Table",props:{class:{}},setup(n){const l=n;return(o,u)=>(c(),v("div",dt,[j("table",{"data-slot":"table",class:g(t(h)("w-full caption-bottom text-sm",l.class))},[b(o.$slots,"default")],2)]))}}),pt=_({__name:"TableBody",props:{class:{}},setup(n){const l=n;return(o,u)=>(c(),v("tbody",{"data-slot":"table-body",class:g(t(h)("[&_tr:last-child]:border-0",l.class))},[b(o.$slots,"default")],2))}}),w=_({__name:"TableCell",props:{class:{}},setup(n){const l=n;return(o,u)=>(c(),v("td",{"data-slot":"table-cell",class:g(t(h)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l.class))},[b(o.$slots,"default")],2))}}),q=_({__name:"TableRow",props:{class:{}},setup(n){const l=n;return(o,u)=>(c(),v("tr",{"data-slot":"table-row",class:g(t(h)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",l.class))},[b(o.$slots,"default")],2))}}),C=_({__name:"TableHead",props:{class:{}},setup(n){const l=n;return(o,u)=>(c(),v("th",{"data-slot":"table-head",class:g(t(h)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l.class))},[b(o.$slots,"default")],2))}}),ft=_({__name:"TableHeader",props:{class:{}},setup(n){const l=n;return(o,u)=>(c(),v("thead",{"data-slot":"table-header",class:g(t(h)("[&_tr]:border-b",l.class))},[b(o.$slots,"default")],2))}}),mt={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},vt={class:"flex flex-col flex-col-reverse md:flex-row justify-end gap-2 items-start md:items-center"},_t={key:1,class:"flex justify-center items-center h-full"},Et=_({__name:"Index",setup(n){const{t:l}=P(),o=[{title:l("Users"),href:"/users"}];O(()=>{X(A,([{isIntersecting:e}])=>{e&&F()}),I()});const u=$(null),f=$([]),k=$(!1),z=$(0),y=$(null),D=$(1),A=$(null),m=$({search:"",is_active:"all"});G(()=>m.value.search,e=>{I()}),G(()=>m.value.is_active,e=>{I()});const I=()=>{k.value=!0,V.get("/users",{params:{...m.value}}).then(e=>{f.value=e.data.data,z.value=e.data.total,y.value=e.data.next_page_url,D.value=e.data.current_page}).catch(e=>{console.error(e)}).finally(()=>{k.value=!1})},F=()=>{y.value&&V.get(y.value,{params:m.value}).then(e=>{const r=e.data.data.filter(i=>!f.value.some(U=>U.id===i.id));f.value.push(...r),y.value=e.data.next_page_url})},S=e=>{u.value?.openSheet(e)},R=e=>{f.value=f.value.map(r=>r.id===e.id?e:r)},H=e=>{f.value.unshift(e),z.value++},L=e=>{confirm("Are you sure you want to delete this user?")&&V.delete("/users/"+e.id).then(()=>{f.value=f.value.filter(r=>r.id!==e.id),z.value--}).catch(r=>{console.error(r)})};return(e,r)=>(c(),v(B,null,[a(t(J),{title:e.$t("Users")},null,8,["title"]),a(tt,{ref_key:"formTarget",ref:u,onUserUpdated:r[0]||(r[0]=i=>R(i)),onUserCreated:r[1]||(r[1]=i=>H(i))},null,512),a(Y,{breadcrumbs:o},{default:s(()=>[j("div",mt,[j("div",vt,[a(t(st),null,{default:s(()=>[a(t(rt),{type:"search",placeholder:e.$t("Search..."),modelValue:m.value.search,"onUpdate:modelValue":r[2]||(r[2]=i=>m.value.search=i),"default-value":m.value.search},null,8,["placeholder","modelValue","default-value"]),a(t(N),null,{default:s(()=>[a(t(at))]),_:1}),a(t(N),{align:"inline-end"},{default:s(()=>[p(d(z.value)+" "+d(e.$t("results")),1)]),_:1})]),_:1}),a(t(it),null,{default:s(()=>[a(t(x),{onClick:r[3]||(r[3]=i=>m.value.is_active="all"),variant:m.value.is_active==="all"?"default":"secondary",size:"sm"},{default:s(()=>[p(d(e.$t("All")),1)]),_:1},8,["variant"]),a(t(x),{onClick:r[4]||(r[4]=i=>m.value.is_active="active"),variant:m.value.is_active==="active"?"default":"secondary",size:"sm"},{default:s(()=>[p(d(e.$t("Active")),1)]),_:1},8,["variant"]),a(t(x),{onClick:r[5]||(r[5]=i=>m.value.is_active="inactive"),variant:m.value.is_active==="inactive"?"default":"secondary",size:"sm"},{default:s(()=>[p(d(e.$t("Inactive")),1)]),_:1},8,["variant"])]),_:1}),a(t(x),{class:"self-end md:self-center",variant:"default",size:"sm",onClick:r[6]||(r[6]=i=>S())},{default:s(()=>[p(d(e.$t("Add User")),1)]),_:1})]),k.value?(c(),v("div",_t,[a(t(E),{class:"size-10"})])):(c(),T(t(ct),{key:0},{default:s(()=>[a(t(ft),null,{default:s(()=>[a(t(q),null,{default:s(()=>[a(t(C),null,{default:s(()=>[p(d(e.$t("ID")),1)]),_:1}),a(t(C),null,{default:s(()=>[p(d(e.$t("Name")),1)]),_:1}),a(t(C),null,{default:s(()=>[p(d(e.$t("Email")),1)]),_:1}),a(t(C),null,{default:s(()=>[p(d(e.$t("Is Active")),1)]),_:1}),a(t(C))]),_:1})]),_:1}),a(t(pt),null,{default:s(()=>[(c(!0),v(B,null,K(f.value,i=>(c(),T(t(q),{key:i.id},{default:s(()=>[a(t(w),null,{default:s(()=>[p(d(i.id),1)]),_:2},1024),a(t(w),{class:"font-semibold"},{default:s(()=>[p(d(i.name),1)]),_:2},1024),a(t(w),{class:"text-left"},{default:s(()=>[p(d(i.email),1)]),_:2},1024),a(t(w),null,{default:s(()=>[a(t(Z),{variant:i.is_active?"secondary":"destructive"},{default:s(()=>[p(d(i.is_active?e.$t("Active"):e.$t("Inactive")),1)]),_:2},1032,["variant"])]),_:2},1024),a(t(w),{class:"flex gap-2 justify-end"},{default:s(()=>[a(t(x),{variant:"outline",size:"sm",onClick:U=>S(i)},{default:s(()=>[p(d(e.$t("Edit")),1)]),_:1},8,["onClick"]),a(t(x),{variant:"destructive",size:"sm",onClick:U=>L(i)},{default:s(()=>[p(d(e.$t("Delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})),y.value&&!k.value?(c(),v("div",{key:2,class:"flex justify-center items-center",ref_key:"loadMoreRef",ref:A},[a(t(E),{class:"size-10"})],512)):Q("",!0)])]),_:1})],64))}});export{Et as default};
